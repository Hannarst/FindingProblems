{% extends 'problems/base.html' %}
{% block content %}
<div class="panel panel-default">
   <div class="panel-heading clearfix">
     <div style="">
         <span style="float:left;padding:5px">
         <h3 class="panel-title" style="padding-top:8px;">
         Results <span class="badge">{{problems.count}}</span>
         </h3>
       </span>

       {% if user.is_authenticated %}
       <span style="float:left;padding:5px">
         <a href="{% url 'add_challenge' %}" class="btn btn-sm btn-success" type="submit">Create challenge</a>
       </span>

           <span class="pull-left"  style="float:left;padding:5px">
               <button type="button" class="btn btn-success btn-sm" data-toggle="modal" data-target="#manualOrUpload">
                    Add Problem
               </button>
               <div class="modal fade" align="center" id="manualOrUpload" role="dialogue">
                   <div class="modal-dialogue modal-sm">
                       <div class="modal-content">
                           <div class="modal-header">
                               <h4>Manual or Upload?</h4>
                           </div>
                           <div class="modal-body">
                               <p>
                                   Would you like to upload a PDF or create a problem manually?
                               </p>
                           </div>
                           <div class="modal-footer">
                               <a href="{% url 'upload' %}" class="btn btn-primary btn-sm">Upload PDF</a>
                               <a href="{% url 'add_problem' %}" class="btn btn-default btn-sm">Manual</a>
                           </div>
                       </div>
                   </div>
               </div>
       </span>
       {% endif %}
     </div>
       <div class="pull-right">
         <form role="search" method="get" class="form-inline">
           <div class="form-group">
             <label for="id_categories" class="sr-only">Category:</label>
             <input type="hidden" id="id_categories" value="{{searched_categories}}" name="categories" class="input-sm form-control" placeholder="Categories">
           </div>
           <div class="form-group">
             <label for="id_difficulty" class="sr-only">Difficulty:</label>
             <select id="id_difficulty" name="difficulty" class="input-sm form-control">
               <option value="">Difficulty (any)</option>
                 {% for val, choice in difficulties %}
                   {% if val == searched_difficulty %}
                     <option value="{{val}}" selected="selected">{{choice}}</option>
                   {% else %}
                   <option value="{{val}}">{{choice}}</option>
                   {% endif %}
                 {% endfor %}
             </select>
           </div>
             {% if user.is_authenticated %}
                 <div class="form-group">
                     <label for="id_visibility" class="sr-only">Visibility:</label>
                     <select id="id_visibility" name="visibility" class="input-sm form-control">
                         <option value="">Visibility (any)</option>
                         <option value="public" {% if searched_privacy == 'public' %} selected="selected" {% endif %} >Public Only</option>
                         <option value="private" {% if searched_privacy == 'private' %} selected="selected" {% endif %}>Private Only</option>
                     </select>
                 </div>
             {% endif %}

           <div class="form-group">
             <button class="btn btn-primary btn-sm"><i class="glyphicon glyphicon-search"></i></button>
           </div>
         </form>
       </div>
   </div>

{% include 'problems/problem_table.html' %}
 </div>

{% endblock %}
